<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lobby</title>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="stylesheet" href="css/colors.css">
  <link rel="stylesheet" href="css/loby.css">
  <link rel="stylesheet" href="fonts/fonts.css">
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  </noscript>
</head>
<body>
  <!-- بخش لودیینگ -->
  <div id="preloader">
    <div class="loader"></div>
  </div>

  <div id="header"></div>
  <script type="module" src="js/header.js"></script>



  <div id="lobby_page" style="display:none;">
    <div class="loby_container">
      <!-- سمت راست -->
      <div class="loby_right">
        <div class="Summary_of_information">
          <div class="info_title"><span>خلاصه اطلاعات</span></div>
          <div class="start_timer">
            <i class="fas fa-clock icon"></i>
            <span>زمان عضوگیری :</span>
            <span id="signup_time"></span>
          </div>
          <div class="tournament_time">
            <i class="fas fa-clock icon"></i>
            <span>زمان شروع :</span>
            <span id="start_time"></span>
          </div>
          <div class="end_time">
            <i class="fas fa-clock icon"></i>
            <span>زمان پایان :</span>
            <span id="end_time"></span>
          </div>
          <div class="tournament_mode">
            <i class="fas fa-users icon"></i>
            <span>حالت :</span>
            <span id="tournament_mode"></span>
          </div>
          <div class="tournament_status">
            <i class="fas fa-trophy icon"></i>
            <span>وضعیت :</span>
            <span id="tournament_status"></span>
          </div>
        </div>

      <!-- HTML -->
      <div class="admin_info">
        <div class="admin_info_title"><span>ادمین مسابقه</span></div>
        <div class="admin_content_section">
          <div class="admin_content">
            <div class="admin_name"><span id="adminUsername">نام کاربری: در حال بارگذاری...</span></div>
            <div class="admin_fullname"><span id="adminFullName">نام: ---</span></div>
          </div>
          <div class="admin_profile">
            <img id="adminProfilePicture" src="img/profile.jpg" alt="profile" loading="lazy">
          </div>
        </div>
        <hr>
        <div class="info_description">
          <span>برای هرگونه سؤال یا مشکل مربوط به تورنومنت با من تماس بگیرید.</span>
        </div>
      </div>
      <button class="support_btn">پشتیبانی</button>

      </div>

      <!-- سمت چپ -->
      <div class="loby_left">
        <div class="loby_banner">
          <div class="banner">
            <img
              id="tournament_banner"
              src=""
              alt="banner"
              decoding="async"
              loading="lazy"
              width="640"
              height="360"
            >
          </div>
          <div class="contant">
            <div class="countdown" id="countdown_section">
              <span id="countdown_timer">00 : 00 : 00</span>
            </div>
            <div class="award">
              <span>مجموع جوایز :</span>
              <span id="prize_pool"></span>
            </div>
            <div class="tournament_title">
              <span id="tournament_title"></span>
            </div>
          </div>
        </div>

        <!-- 📌 لیست بازیکن‌ها / تیم‌ها -->
        <div id="participants_section" class="participants_section"></div>
                <!-- لیدر بورد بعد از اتمام تورنومنت و تایید کردن برندگان از سوی ادمین تورنومنت کاربران برنده رو نمایش میده -->
                <div class="loby_leaderboard" style="display: none;"></div>

      </div>
    </div>
  </div>





  <!-- 🔹 مودال ثبت‌نام انفرادی -->
  <div id="individualJoinModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="individualJoinModalTitle">
    <div class="modal_content modal_content--compact">
      <div class="modal_header">
        <div>
          <h2 id="individualJoinModalTitle" class="modal_title">ثبت‌نام در تورنومنت</h2>
          <p class="modal_desc" id="individualJoinModalDescription">
            برای ورود به این تورنومنت لطفاً نام کاربری خود در بازی (In-Game ID) را وارد یا انتخاب کنید.
          </p>
        </div>
        <button type="button" class="modal_close" onclick="closeIndividualJoinModal()" aria-label="بستن">
          &times;
        </button>
      </div>

      <form class="modal_form" onsubmit="joinIndividualTournament(event)">
        <div class="modal_field">
          <label class="modal_label" for="inGameIdInput">نام کاربری شما در بازی</label>
          <input
            id="inGameIdInput"
            class="modal_input"
            type="text"
            name="inGameId"
            maxlength="64"
            autocomplete="off"
            placeholder="مثال: Gamer#1234"
            required
          >
          <p id="inGameIdHint" class="modal_hint">این نام برای هماهنگی با ادمین تورنومنت استفاده می‌شود.</p>
        </div>

        <div class="modal_field" id="inGameIdSavedWrapper">
          <label class="modal_label" for="inGameIdSelect">نام‌های ذخیره‌شده شما</label>
          <div class="modal_select_wrapper">
            <select id="inGameIdSelect" class="modal_select" aria-describedby="inGameIdHint">
              <option value="">یکی از نام‌های قبلی را انتخاب کنید</option>
            </select>
            <button type="button" class="modal_button modal_button--ghost" onclick="useSavedInGameId()">انتخاب</button>
          </div>
        </div>

        <div id="individualJoinError" class="modal_alert modal_alert--error is-hidden" role="alert" aria-live="assertive"></div>

        <div class="modal_actions">
          <button type="button" class="modal_button modal_button--secondary" onclick="closeIndividualJoinModal()">انصراف</button>
          <button type="submit" class="modal_button modal_button--primary">تایید و ثبت‌نام</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 🔹 مودال انتخاب تیم -->
  <div id="teamJoinModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="teamJoinModalTitle">
    <div class="modal_content modal_content--wide">
      <div class="modal_header">
        <div>
          <h2 id="teamJoinModalTitle" class="modal_title">انتخاب تیم برای ثبت‌نام</h2>
          <p id="teamModalMeta" class="modal_desc"></p>
        </div>
        <button type="button" class="modal_close" onclick="closeTeamJoinModal()" aria-label="بستن">
          &times;
        </button>
      </div>

      <div class="team-modal__toolbar">
        <div class="team-modal__search">
          <input type="search" id="teamModalSearch" placeholder="جستجوی نام تیم..." aria-label="جستجوی تیم">
          <i class="fas fa-search"></i>
        </div>
        <div class="team-modal__hint" id="teamModalHint"></div>
      </div>

      <div id="teamModalLoading" class="team-modal__loader is-hidden">
        <span class="team-modal__spinner"></span>
        <span>در حال دریافت تیم‌های شما...</span>
      </div>

      <div id="teamModalEmptyState" class="team-modal__empty is-hidden">
        <i class="fas fa-users-slash"></i>
        <p>هیچ تیم واجد شرایطی برای این تورنومنت پیدا نشد.</p>
        <span>تیم انتخابی باید با ظرفیت تورنومنت هم‌خوانی داشته باشد و شما کاپیتان آن باشید.</span>
      </div>

      <div id="teamModalList" class="team-modal__list" role="listbox" aria-label="تیم‌های در دسترس"></div>

      <select id="teamSelect" class="team-modal__select" aria-hidden="true" tabindex="-1"></select>

      <div id="teamJoinError" class="modal_alert modal_alert--error is-hidden" role="alert" aria-live="assertive"></div>

      <div class="modal_actions">
        <button type="button" class="modal_button modal_button--secondary" onclick="closeTeamJoinModal()">انصراف</button>
        <button id="teamJoinConfirmButton" type="button" class="modal_button modal_button--primary" onclick="joinTeamTournament()" disabled>
          تایید و ثبت‌نام تیم
        </button>
      </div>
    </div>
  </div>


  <!-- 🔹 مودال موفقیت ثبت‌نام -->
  <div
    id="joinSuccessModal"
    class="modal modal--success"
    role="alertdialog"
    aria-modal="true"
    aria-labelledby="joinSuccessModalTitle"
    aria-describedby="joinSuccessModalMessage"
    aria-hidden="true"
  >
    <div class="modal_content modal_content--compact">
      <div class="modal_header modal_header--success">
        <div class="modal_success_icon" aria-hidden="true">
          <i class="fas fa-envelope-open-text"></i>
        </div>
        <div class="modal_success_texts">
          <h2 id="joinSuccessModalTitle" class="modal_title">ثبت‌نام با موفقیت انجام شد</h2>
          <p id="joinSuccessModalMessage" class="modal_desc"></p>
        </div>
        <button type="button" class="modal_close" onclick="closeJoinSuccessModal()" aria-label="بستن">
          &times;
        </button>
      </div>
      <div class="modal_actions">
        <button type="button" class="modal_button modal_button--primary" onclick="closeJoinSuccessModal()">متوجه شدم</button>
      </div>
    </div>
  </div>




    <!-- Footer -->
    <div id="footer"></div>
  <script type="module" src="js/footer.js"></script>

  <script type="module" src="js/loby.js"></script>
</body>
</html>

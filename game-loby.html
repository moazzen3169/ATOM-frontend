<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lobby</title>
  <link rel="stylesheet" href="css/loby.css">
  <link rel="stylesheet" href="css/colors.css">
  <link rel="stylesheet" href="fonts/fonts.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- بخش لودیینگ -->
  <div id="preloader">
    <div class="loader"></div>
  </div>

  <div id="header"></div>
  <script type="module" src="js/header.js"></script>

  <!-- پیام لاگین -->
  <div id="login_required" class="login_required" style="display:none;">
    <p>برای مشاهده این تورنومنت باید وارد حساب خود شوید.</p>
    <a href="/login.html" class="btn">ورود</a>
    <a href="/signup.html" class="btn">ثبت‌نام</a>
  </div>

  <div id="lobby_page" style="display:none;">
    <div class="loby_container">
      <!-- سمت راست -->
      <div class="loby_right">
        <div class="Summary_of_information">
          <div class="info_title"><span>خلاصه اطلاعات</span></div>
          <div class="start_timer">
            <i class="fas fa-clock icon"></i>
            <span>زمان عضوگیری :</span>
            <span id="signup_time"></span>
          </div>
          <div class="tournament_time">
            <i class="fas fa-clock icon"></i>
            <span>زمان شروع :</span>
            <span id="start_time"></span>
          </div>
          <div class="end_time">
            <i class="fas fa-clock icon"></i>
            <span>زمان پایان :</span>
            <span id="end_time"></span>
          </div>
          <div class="tournament_mode">
            <i class="fas fa-users icon"></i>
            <span>حالت :</span>
            <span id="tournament_mode"></span>
          </div>
          <div class="tournament_status">
            <i class="fas fa-trophy icon"></i>
            <span>وضعیت :</span>
            <span id="tournament_status"></span>
          </div>
        </div>

      <!-- HTML -->
      <div class="admin_info">
        <div class="admin_info_title"><span>ادمین مسابقه</span></div>
        <div class="admin_content_section">
          <div class="admin_content">
            <div class="admin_name"><span id="adminUsername">نام کاربری: در حال بارگذاری...</span></div>
            <div class="admin_fullname"><span id="adminFullName">نام: ---</span></div>
          </div>
          <div class="admin_profile">
            <img id="adminProfilePicture" src="img/profile.jpg" alt="profile">
          </div>
        </div>
        <hr>
        <div class="info_description">
          <span>برای هرگونه سؤال یا مشکل مربوط به تورنومنت با من تماس بگیرید.</span>
        </div>
      </div>
      <button class="support_btn">پشتیبانی</button>

      </div>

      <!-- سمت چپ -->
      <div class="loby_left">
        <div class="loby_banner">
          <div class="banner">
            <img id="tournament_banner" src="" alt="banner">
          </div>
          <div class="contant">
            <div class="countdown" id="countdown_section">
              <span id="countdown_timer">00 : 00 : 00</span>
            </div>
            <div class="award">
              <span>مجموع جوایز :</span>
              <span id="prize_pool"></span>
            </div>
            <div class="tournament_title">
              <span id="tournament_title"></span>
            </div>
          </div>
        </div>

        <!-- 📌 لیست بازیکن‌ها / تیم‌ها -->
        <div id="participants_section" class="participants_section"></div>
                <!-- لیدر بورد بعد از اتمام تورنومنت و تایید کردن برندگان از سوی ادمین تورنومنت کاربران برنده رو نمایش میده -->
                <div class="loby_leaderboard" style="display: none;"></div>

      </div>
    </div>
  </div>





  <!-- 🔹 مودال ثبت‌نام انفرادی -->
  <div id="individualJoinModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="individualJoinModalTitle">
    <div class="modal_content modal_content--compact">
      <div class="modal_header">
        <h2 id="individualJoinModalTitle" class="modal_title">ثبت‌نام در تورنومنت</h2>
        <button type="button" class="modal_close" onclick="closeIndividualJoinModal()" aria-label="بستن">
          &times;
        </button>
      </div>
      <p class="modal_desc">برای ورود به این تورنومنت کافیست شرایط لازم را داشته باشید. با تایید، حساب شما به عنوان شرکت‌کننده ثبت می‌شود.</p>
      <div class="modal_actions">
        <button type="button" class="modal_button modal_button--secondary" onclick="closeIndividualJoinModal()">انصراف</button>
        <button type="button" class="modal_button modal_button--primary" onclick="joinIndividualTournament()">تایید ثبت‌نام</button>
      </div>
    </div>
  </div>

  <!-- 🔹 مودال انتخاب تیم -->
  <div id="teamJoinModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="teamJoinModalTitle">
    <div class="modal_content modal_content--wide">
      <div class="modal_header">
        <div>
          <h2 id="teamJoinModalTitle" class="modal_title">انتخاب تیم برای ثبت‌نام</h2>
          <p id="teamModalMeta" class="modal_desc"></p>
        </div>
        <button type="button" class="modal_close" onclick="closeTeamJoinModal()" aria-label="بستن">
          &times;
        </button>
      </div>

      <div class="team-modal__toolbar">
        <div class="team-modal__search">
          <input type="search" id="teamModalSearch" placeholder="جستجوی نام تیم..." aria-label="جستجوی تیم">
          <i class="fas fa-search"></i>
        </div>
        <div class="team-modal__hint" id="teamModalHint"></div>
      </div>

      <div id="teamModalLoading" class="team-modal__loader is-hidden">
        <span class="team-modal__spinner"></span>
        <span>در حال دریافت تیم‌های شما...</span>
      </div>

      <div id="teamModalEmptyState" class="team-modal__empty is-hidden">
        <i class="fas fa-users-slash"></i>
        <p>هیچ تیم واجد شرایطی برای این تورنومنت پیدا نشد.</p>
        <span>تیم انتخابی باید با ظرفیت تورنومنت هم‌خوانی داشته باشد و شما کاپیتان آن باشید.</span>
      </div>

      <div id="teamModalList" class="team-modal__list"></div>

      <select id="teamSelect" class="team-modal__select" aria-hidden="true" tabindex="-1"></select>

      <div class="modal_actions">
        <button type="button" class="modal_button modal_button--secondary" onclick="closeTeamJoinModal()">انصراف</button>
        <button id="teamJoinConfirmButton" type="button" class="modal_button modal_button--primary" onclick="joinTeamTournament()" disabled>
          تایید و ثبت‌نام تیم
        </button>
      </div>
    </div>
  </div>
    



    <!-- Footer -->
    <div id="footer"></div>
  <script type="module" src="js/footer.js"></script>

  <script type="module" src="js/loby.js"></script>
  <script type="module" src="js/loading.js"></script>
</body>
</html>
